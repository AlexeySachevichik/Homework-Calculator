var view={display:{item:document.getElementById("display"),refresh:function(){view.display.item.innerHTML=model.calculator.current}},history:{item:document.getElementById("history"),show:function(){view.history.item.innerHTML=model.calculator.history},clear:function(){view.history.item.innerHTML=""}},status:{item:document.getElementById("status"),show:function(e){view.status.item.innerHTML=e},clear:function(){view.status.item.innerHTML=""}},numbers:{n1:document.getElementById("n1"),n2:document.getElementById("n2"),n3:document.getElementById("n3"),n4:document.getElementById("n4"),n5:document.getElementById("n5"),n6:document.getElementById("n6"),n7:document.getElementById("n7"),n8:document.getElementById("n8"),n9:document.getElementById("n9"),n0:document.getElementById("n0"),inv:document.getElementById("inv"),dot:document.getElementById("dot")},arithmetic:{division:document.getElementById("div"),multiplication:document.getElementById("mul"),subtraction:document.getElementById("minus"),addition:document.getElementById("plus")},control:{delete:document.getElementById("del"),pop:document.getElementById("ce"),clear:document.getElementById("c"),equally:document.getElementById("equally")}},model={display:{clear:function(){model.calculator.current=0,model.calculator.memomy=0,model.calculator.result=0,model.calculator.operation="",model.calculator.history="",view.display.refresh(),view.status.clear(),view.history.clear()}},history:{add:function(e){model.calculator.current<0?model.calculator.history+="("+model.calculator.current+") "+e+" ":model.calculator.history+=model.calculator.current+" "+e+" "},finish:function(){var e=model.calculator.history.slice(0,model.calculator.history.length-2);model.calculator.history=e+" = <b>"+model.calculator.current+"</b>"},edit:function(e){var l=model.calculator.history.slice(0,model.calculator.history.length-2);model.calculator.history=l+e+" "},clear:function(){model.calculator.history=""}},calculator:{current:0,memomy:0,result:0,firstStep:!0,operation:"",history:"",limit:15,length:function(){return(model.calculator.current+"").replace(".","").replace("-","").length},push:function(e){model.calculator.length()<model.calculator.limit?0===model.calculator.current?(model.calculator.current=+e,view.display.refresh(),view.status.clear()):(model.calculator.current=+(model.calculator.current+""+e),view.display.refresh(),view.status.clear()):view.status.show("Ограничение колличества знаков")},pop:function(){model.calculator.current=0,view.display.refresh(),view.status.clear()},delete:function(){if(0!=model.calculator.current){var e=(model.calculator.current+"").slice(0,model.calculator.length()-1);model.calculator.current=+e,NaN!=model.calculator.current&&0!=model.calculator.current&&0!=model.calculator.current&&""!=model.calculator.current&&"-"!=model.calculator.current&&void 0!=model.calculator.current||(model.calculator.current=0),view.display.refresh(),view.status.clear()}else view.status.show("Очистка завершена")},inversion:function(){0!=model.calculator.current?(model.calculator.current*=-1,view.display.refresh(),view.status.clear()):view.status.show("Нулю не может быть присвоен никакой знак")},decimal:function(){-1==(model.calculator.current+"").indexOf(".")?(model.calculator.current+=".",view.display.refresh(),view.status.clear()):view.status.show("Число уже имеет десятичный знак")},equally:function(){model.calculator.firstStep=!0,"equally"!=model.calculator.operation&&(model.history.add(""),console.log(model.calculator.firstStep,model.calculator.current,model.calculator.memomy,model.calculator.result),"addition"==model.calculator.operation?model.calculator.result=model.calculator.memomy+model.calculator.current:"subtraction"==model.calculator.operation&&(model.calculator.result=model.calculator.memomy-model.calculator.current),model.calculator.memomy=0,model.calculator.current=model.calculator.result,console.log(model.calculator.firstStep,model.calculator.current,model.calculator.memomy,model.calculator.result),model.history.finish(),view.display.refresh(),view.history.show(),model.history.clear(),model.calculator.operation="equally")}},arithmetic:{division:function(){console.log("division")},multiplication:function(){console.log("multiplication")},subtraction:function(){console.log(model.calculator.firstStep,model.calculator.current,model.calculator.memomy),"subtraction"==model.calculator.operation||"equally"==model.calculator.operation||""==model.calculator.operation?(model.history.add("-"),view.history.show(),model.calculator.firstStep?model.calculator.memomy=model.calculator.current:model.calculator.memomy=model.calculator.memomy-model.calculator.current,model.calculator.firstStep=!1,model.calculator.current=0):(model.history.edit("-"),model.history.add("-"),view.history.show()),model.calculator.operation="subtraction",view.display.refresh(),view.status.clear(),console.log(model.calculator.firstStep,model.calculator.current,model.calculator.memomy)},addition:function(){console.log(model.calculator.firstStep,model.calculator.current,model.calculator.memomy),"addition"==model.calculator.operation||"equally"==model.calculator.operation||""==model.calculator.operation?(model.history.add("+"),view.history.show(),model.calculator.firstStep?model.calculator.memomy=model.calculator.current:model.calculator.memomy=model.calculator.memomy+model.calculator.current,model.calculator.firstStep=!1,model.calculator.current=0):(model.history.edit("+"),view.history.show()),model.calculator.operation="addition",view.display.refresh(),view.status.clear(),console.log(model.calculator.firstStep,model.calculator.current,model.calculator.memomy)}}},controller={numbers:{push:function(e){var l=e.target.innerHTML;model.calculator.push(l)},inversion:function(){model.calculator.inversion()},decimal:function(){model.calculator.decimal()}},control:{delete:function(){model.calculator.delete()},pop:function(){model.calculator.pop()},clear:function(){model.display.clear()},equally:function(){model.calculator.equally()}},arithmetic:{division:function(){model.arithmetic.division()},multiplication:function(){model.arithmetic.multiplication()},subtraction:function(){model.arithmetic.subtraction()},addition:function(){model.arithmetic.addition()}}};({init:function(){model.display.clear(),this.event()},event:function(){view.numbers.n1.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.n2.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.n3.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.n4.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.n5.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.n6.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.n7.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.n8.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.n9.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.n0.addEventListener("click",function(e){controller.numbers.push(e)}),view.numbers.inv.addEventListener("click",controller.numbers.inversion),view.numbers.dot.addEventListener("click",controller.numbers.decimal),view.arithmetic.division.addEventListener("click",controller.arithmetic.division),view.arithmetic.multiplication.addEventListener("click",controller.arithmetic.multiplication),view.arithmetic.subtraction.addEventListener("click",controller.arithmetic.subtraction),view.arithmetic.addition.addEventListener("click",controller.arithmetic.addition),view.control.delete.addEventListener("click",controller.control.delete),view.control.pop.addEventListener("click",controller.control.pop),view.control.clear.addEventListener("click",controller.control.clear),view.control.equally.addEventListener("click",controller.control.equally)}}).init();